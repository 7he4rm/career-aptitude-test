<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·åˆé©è·è¨ºæ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</title>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BBY3JEMC7J"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BBY3JEMC7J');
      
      // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆè¿½è·¡ç”¨é–¢æ•°
      function trackEvent(action, category, label, value) {
        gtag('event', action, {
          'event_category': category,
          'event_label': label,
          'value': value
        });
      }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            position: relative;
        }

        .node {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 90vw;
            width: 100%;
            max-width: 400px;
            text-align: center;
            position: relative;
            transform: translateY(20px);
            opacity: 0;
            animation: nodeAppear 0.8s ease-out forwards;
            margin: 0 auto;
            touch-action: manipulation;
        }

        .node:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }

        .node:active {
            transform: translateY(0px);
        }

        .node.start {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
            animation-delay: 0.2s;
        }

        .node.question {
            background: linear-gradient(135deg, #4fc3f7, #29b6f6);
            color: white;
            animation-delay: 0.4s;
        }

        .node.result {
            background: linear-gradient(135deg, #66bb6a, #4caf50);
            color: white;
            animation-delay: 0.6s;
            display: none;
            max-width: 95vw;
            width: 100%;
        }

        .node.active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255,255,255,0.5);
        }

        .node-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
            animation: bounce 2s infinite;
        }

        .node h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .node p {
            font-size: 0.95rem;
            line-height: 1.4;
            margin-bottom: 18px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 18px;
        }

        .option-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 16px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            text-align: left;
            line-height: 1.4;
            min-height: 60px;
            display: flex;
            align-items: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .option-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.02);
        }

        .option-btn:active {
            background: rgba(255,255,255,0.4);
            transform: scale(0.98);
        }

        .arrow {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid white;
            animation: pulse 2s infinite;
            opacity: 0.7;
        }

        .connection-line {
            width: 3px;
            height: 50px;
            background: linear-gradient(to bottom, white, transparent);
            opacity: 0.5;
            animation: lineGlow 3s infinite;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffa726);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        .reset-btn {
            position: fixed;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            z-index: 1000;
        }

        .reset-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(360deg);
        }

        .reset-btn:active {
            transform: scale(0.9);
        }

        .career-result {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .career-card {
            background: white;
            border-radius: 15px;
            padding: 18px;
            text-align: center;
            transform: translateY(20px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
            color: #333;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .career-card h4 {
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .career-card .icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .career-card .category {
            background: #f0f0f0;
            color: #666;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            display: inline-block;
        }

        .match-score {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes nodeAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.7;
            }
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        @keyframes lineGlow {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.8;
            }
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 5px;
            }

            .header h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .header p {
                font-size: 1rem;
            }
            
            .node {
                padding: 18px;
                border-radius: 16px;
            }
            
            .node-icon {
                font-size: 2.2rem;
                margin-bottom: 12px;
            }

            .node h3 {
                font-size: 1.2rem;
                margin-bottom: 10px;
            }

            .node p {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }

            .options {
                gap: 10px;
                margin-top: 15px;
            }

            .option-btn {
                padding: 14px 16px;
                font-size: 0.85rem;
                min-height: 55px;
                border-radius: 20px;
            }
            
            .career-result {
                gap: 12px;
                margin-top: 20px;
            }

            .career-card {
                padding: 15px;
            }

            .career-card h4 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .career-card p {
                font-size: 0.85rem;
            }

            .career-card .icon {
                font-size: 2rem;
                margin-bottom: 10px;
            }

            .connection-line {
                height: 30px;
            }

            .arrow {
                border-left: 12px solid transparent;
                border-right: 12px solid transparent;
                border-top: 16px solid white;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 3px;
            }

            .header {
                margin-bottom: 25px;
            }

            .header h1 {
                font-size: 1.6rem;
                margin-bottom: 6px;
            }

            .header p {
                font-size: 0.9rem;
            }
            
            .node {
                padding: 15px;
                border-radius: 14px;
            }

            .node-icon {
                font-size: 2rem;
                margin-bottom: 10px;
            }

            .node h3 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .node p {
                font-size: 0.85rem;
                margin-bottom: 12px;
            }
            
            .options {
                gap: 8px;
                margin-top: 12px;
            }
            
            .option-btn {
                padding: 12px 14px;
                font-size: 0.8rem;
                min-height: 50px;
                border-radius: 18px;
            }

            .career-card {
                padding: 12px;
            }

            .career-card h4 {
                font-size: 1rem;
                margin-bottom: 6px;
            }

            .career-card p {
                font-size: 0.8rem;
                line-height: 1.3;
            }

            .career-card .icon {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .career-card .category {
                font-size: 0.7rem;
                padding: 3px 8px;
                margin-bottom: 8px;
            }

            .match-score {
                padding: 6px 12px;
                font-size: 0.8rem;
                margin-top: 8px;
            }

            .reset-btn {
                top: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
                padding: 10px;
            }

            .progress-bar {
                margin-bottom: 20px;
            }

            .connection-line {
                height: 25px;
            }

            .arrow {
                border-left: 10px solid transparent;
                border-right: 10px solid transparent;
                border-top: 14px solid white;
            }
        }

        @media (max-width: 360px) {
            .header h1 {
                font-size: 1.4rem;
            }

            .header p {
                font-size: 0.85rem;
            }

            .node {
                padding: 12px;
            }

            .node h3 {
                font-size: 1rem;
            }

            .node p {
                font-size: 0.8rem;
            }

            .option-btn {
                padding: 10px 12px;
                font-size: 0.75rem;
                min-height: 45px;
            }
        }

        /* ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ç”¨ã®èª¿æ•´ */
        @media (hover: none) and (pointer: coarse) {
            .node:hover {
                transform: translateY(0px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }

            .option-btn:hover {
                background: rgba(255,255,255,0.2);
                transform: scale(1);
            }

            .reset-btn:hover {
                background: rgba(255,255,255,0.2);
                transform: none;
            }
        }
    </style>
</head>
<body>
    <button class="reset-btn" onclick="resetTest()" title="ãƒ†ã‚¹ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ">ğŸ”„</button>
    
    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ ç·åˆé©è·è¨ºæ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ ğŸŒŸ</h1>
            <p>50ä»¥ä¸Šã®è·æ¥­ã‹ã‚‰ã€ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ä»•äº‹ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ï¼</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="flowchart" id="flowchart">
            <!-- ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ -->
            <div class="node start active" id="start">
                <span class="node-icon">ğŸš€</span>
                <h3>ç·åˆé©è·è¨ºæ–­ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</h3>
                <p>7ã¤ã®è³ªå•ã«ç­”ãˆã¦ã€50ä»¥ä¸Šã®è·æ¥­ã‹ã‚‰ã‚ãªãŸã®ç†æƒ³çš„ãªè·æ¥­ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</p>
                <div class="options">
                    <button class="option-btn" onclick="startDiagnosis()">ğŸ“‹ è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹</button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•1: èˆˆå‘³ãƒ»é–¢å¿ƒåˆ†é‡ -->
            <div class="node question" id="q1" style="display: none;">
                <span class="node-icon">ğŸ’¡</span>
                <h3>ã©ã®åˆ†é‡ã«æœ€ã‚‚èˆˆå‘³ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</h3>
                <p>ã‚ãªãŸãŒè‡ªç„¶ã¨æƒ¹ã‹ã‚Œã‚‹åˆ†é‡ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('interest', 'technology'); nextQuestion('q2')">
                        ğŸ’» ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»ITãƒ»ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º
                    </button>
                    <button class="option-btn" onclick="setAnswer('interest', 'people'); nextQuestion('q2')">
                        ğŸ‘¥ äººã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
                    </button>
                    <button class="option-btn" onclick="setAnswer('interest', 'creative'); nextQuestion('q2')">
                        ğŸ¨ ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»èŠ¸è¡“ãƒ»è¡¨ç¾
                    </button>
                    <button class="option-btn" onclick="setAnswer('interest', 'health'); nextQuestion('q2')">
                        ğŸ¥ åŒ»ç™‚ãƒ»å¥åº·ãƒ»ç¦ç¥‰ãƒ»ã‚±ã‚¢
                    </button>
                    <button class="option-btn" onclick="setAnswer('interest', 'business'); nextQuestion('q2')">
                        ğŸ“ˆ ãƒ“ã‚¸ãƒã‚¹ãƒ»çµŒå–¶ãƒ»é‡‘è
                    </button>
                    <button class="option-btn" onclick="setAnswer('interest', 'education'); nextQuestion('q2')">
                        ğŸ“š æ•™è‚²ãƒ»ç ”ç©¶ãƒ»çŸ¥è­˜ã®ä¼é”
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•2: æ€§æ ¼ã‚¿ã‚¤ãƒ— -->
            <div class="node question" id="q2" style="display: none;">
                <span class="node-icon">ğŸ§ </span>
                <h3>ã‚ãªãŸã®æ€§æ ¼ã‚¿ã‚¤ãƒ—ã¯ï¼Ÿ</h3>
                <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æºæ³‰ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('personality', 'introvert'); nextQuestion('q3')">
                        ğŸ  ä¸€äººã®æ™‚é–“ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å›å¾©ã—ã€æ·±ãè€ƒãˆã‚‹ã“ã¨ãŒå¥½ã
                    </button>
                    <button class="option-btn" onclick="setAnswer('personality', 'extrovert'); nextQuestion('q3')">
                        ğŸ‘¥ äººã¨ã®äº¤æµã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¾—ã¦ã€ç©æ¥µçš„ã«é–¢ã‚ã‚ŠãŸã„
                    </button>
                    <button class="option-btn" onclick="setAnswer('personality', 'balanced'); nextQuestion('q3')">
                        âš–ï¸ çŠ¶æ³ã«å¿œã˜ã¦ä¸€äººã®æ™‚é–“ã¨äººã¨ã®æ™‚é–“ã‚’ä½¿ã„åˆ†ã‘ã‚‹
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•3: å•é¡Œè§£æ±ºã‚¹ã‚¿ã‚¤ãƒ« -->
            <div class="node question" id="q3" style="display: none;">
                <span class="node-icon">ğŸ”</span>
                <h3>å•é¡Œè§£æ±ºã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ï¼Ÿ</h3>
                <p>å›°é›£ãªèª²é¡Œã«ç›´é¢ã—ãŸæ™‚ã®å¯¾å‡¦æ³•ã¯ï¼Ÿ</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('problem_solving', 'analytical'); nextQuestion('q4')">
                        ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚„è«–ç†ã‚’é‡è¦–ã—ã¦ä½“ç³»çš„ã«åˆ†æã™ã‚‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('problem_solving', 'creative'); nextQuestion('q4')">
                        ğŸ’¡ ç›´æ„Ÿã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ´»ã‹ã—ã¦å‰µé€ çš„ã«è§£æ±ºã™ã‚‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('problem_solving', 'practical'); nextQuestion('q4')">
                        ğŸ”§ å®Ÿè·µçš„ã§åŠ¹ç‡çš„ãªæ–¹æ³•ã‚’é‡è¦–ã™ã‚‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('problem_solving', 'collaborative'); nextQuestion('q4')">
                        ğŸ¤ ãƒãƒ¼ãƒ ã¨å”åŠ›ã—ã¦å¤šè§’çš„ã«å–ã‚Šçµ„ã‚€
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•4: ä»•äº‹ç’°å¢ƒã®å¥½ã¿ -->
            <div class="node question" id="q4" style="display: none;">
                <span class="node-icon">ğŸ¢</span>
                <h3>ç†æƒ³ã®ä»•äº‹ç’°å¢ƒã¯ï¼Ÿ</h3>
                <p>ã©ã‚“ãªç’°å¢ƒã§åƒããŸã„ã§ã™ã‹ï¼Ÿ</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('environment', 'office'); nextQuestion('q5')">
                        ğŸ¢ ã‚ªãƒ•ã‚£ã‚¹ã‚„çµ„ç¹”å†…ã§å®‰å®šã—ãŸç’°å¢ƒ
                    </button>
                    <button class="option-btn" onclick="setAnswer('environment', 'fieldwork'); nextQuestion('q5')">
                        ğŸŒ ç¾å ´ã‚„å¤–éƒ¨ã§å‹•ãå›ã‚‹æ´»å‹•çš„ãªç’°å¢ƒ
                    </button>
                    <button class="option-btn" onclick="setAnswer('environment', 'remote'); nextQuestion('q5')">
                        ğŸ  è‡ªå®…ã‚„ãƒªãƒ¢ãƒ¼ãƒˆã§ã®æŸ”è»Ÿãªåƒãæ–¹
                    </button>
                    <button class="option-btn" onclick="setAnswer('environment', 'specialized'); nextQuestion('q5')">
                        ğŸ”¬ å°‚é–€çš„ãªè¨­å‚™ã‚„æ–½è¨­ã§ã®é›†ä¸­ã—ãŸç’°å¢ƒ
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•5: ä¾¡å€¤è¦³ãƒ»å‹•æ©Ÿ -->
            <div class="node question" id="q5" style="display: none;">
                <span class="node-icon">â­</span>
                <h3>ä»•äº‹ã§æœ€ã‚‚é‡è¦–ã™ã‚‹ã‚‚ã®ã¯ï¼Ÿ</h3>
                <p>ã‚ãªãŸã®ä¾¡å€¤è¦³ã«æœ€ã‚‚è¿‘ã„ã‚‚ã®ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('values', 'stability'); nextQuestion('q6')">
                        ğŸ›¡ï¸ å®‰å®šã—ãŸåå…¥ã¨é›‡ç”¨ã®ä¿éšœ
                    </button>
                    <button class="option-btn" onclick="setAnswer('values', 'growth'); nextQuestion('q6')">
                        ğŸ“ˆ æˆé•·ã¨ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—ã®æ©Ÿä¼š
                    </button>
                    <button class="option-btn" onclick="setAnswer('values', 'impact'); nextQuestion('q6')">
                        ğŸŒ ç¤¾ä¼šã¸ã®è²¢çŒ®ã¨æ„ç¾©ã®ã‚ã‚‹ä»•äº‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('values', 'creativity'); nextQuestion('q6')">
                        ğŸ¨ å‰µé€ æ€§ã¨è‡ªå·±è¡¨ç¾ã®æ©Ÿä¼š
                    </button>
                    <button class="option-btn" onclick="setAnswer('values', 'autonomy'); nextQuestion('q6')">
                        ğŸ—½ è‡ªç”±åº¦ã¨è£é‡æ¨©ã®å¤§ãã„ä»•äº‹
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•6: åƒãæ–¹ã®ã‚¹ã‚¿ã‚¤ãƒ« -->
            <div class="node question" id="q6" style="display: none;">
                <span class="node-icon">âš™ï¸</span>
                <h3>ç†æƒ³ã®åƒãæ–¹ã¯ï¼Ÿ</h3>
                <p>ã©ã®ã‚ˆã†ãªå½¹å‰²ã§åŠ›ã‚’ç™ºæ®ã—ãŸã„ã§ã™ã‹ï¼Ÿ</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('workstyle', 'specialist'); nextQuestion('q7')">
                        ğŸ¯ å°‚é–€åˆ†é‡ã®ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã¨ã—ã¦æ·±ãè¿½æ±‚
                    </button>
                    <button class="option-btn" onclick="setAnswer('workstyle', 'generalist'); nextQuestion('q7')">
                        ğŸŒŸ å¹…åºƒã„æ¥­å‹™ã«å¯¾å¿œã™ã‚‹ã‚¼ãƒãƒ©ãƒªã‚¹ãƒˆ
                    </button>
                    <button class="option-btn" onclick="setAnswer('workstyle', 'leader'); nextQuestion('q7')">
                        ğŸ‘‘ ãƒãƒ¼ãƒ ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªãƒ¼ãƒ€ãƒ¼
                    </button>
                    <button class="option-btn" onclick="setAnswer('workstyle', 'supporter'); nextQuestion('q7')">
                        ğŸ¤² ä»–è€…ã‚’ã‚µãƒãƒ¼ãƒˆã—æ”¯ãˆã‚‹å½¹å‰²
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- è³ªå•7: ã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ãƒ»ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ -->
            <div class="node question" id="q7" style="display: none;">
                <span class="node-icon">ğŸ’ª</span>
                <h3>ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚„ç· åˆ‡ã«ã¤ã„ã¦ã©ã†æ€ã„ã¾ã™ã‹ï¼Ÿ</h3>
                <p>ã‚¹ãƒˆãƒ¬ã‚¹ã®å¤šã„çŠ¶æ³ã§ã®åƒãæ–¹ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚</p>
                <div class="options">
                    <button class="option-btn" onclick="setAnswer('stress', 'high_pressure'); showResult()">
                        ğŸ”¥ ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚„ç· åˆ‡ãŒã‚ã‚‹ã¨åŠ›ã‚’ç™ºæ®ã§ãã‚‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('stress', 'moderate'); showResult()">
                        âš–ï¸ é©åº¦ãªç·Šå¼µæ„ŸãŒã‚ã‚‹ã¨è‰¯ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‡ºã›ã‚‹
                    </button>
                    <button class="option-btn" onclick="setAnswer('stress', 'low_pressure'); showResult()">
                        ğŸŒ± ç©ã‚„ã‹ã§ä½™è£•ã®ã‚ã‚‹ç’°å¢ƒã§åŠ›ã‚’ç™ºæ®ã™ã‚‹
                    </button>
                </div>
            </div>

            <div class="connection-line"></div>
            <div class="arrow"></div>

            <!-- çµæœè¡¨ç¤º -->
            <div class="node result" id="result">
                <span class="node-icon">ğŸ‰</span>
                <h3>ã‚ãªãŸã®é©è·è¨ºæ–­çµæœ</h3>
                <p>ã‚ãªãŸã®ç‰¹æ€§ã«åŸºã¥ã„ãŸãŠã™ã™ã‚ã®è·æ¥­ã§ã™ï¼</p>
                <div class="career-result" id="careerResult">
                    <!-- çµæœãŒã“ã“ã«å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                </div>
                <div class="options" style="margin-top: 30px;">
                    <button class="option-btn" onclick="resetTest()">ğŸ”„ ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let answers = {};
        let currentQuestion = 0;
        const totalQuestions = 7;

        function setAnswer(category, value) {
            answers[category] = value;
            console.log('ç¾åœ¨ã®å›ç­”:', answers);
            
            // Google Analytics: å›ç­”é¸æŠè¿½è·¡
            trackEvent('answer_selected', 'diagnosis', `${category}_${value}`, 1);
        }

        function nextQuestion(questionId) {
            // ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ¼ãƒ‰ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.querySelector('.node.active').classList.remove('active');
            
            // å‰ã®è³ªå•ã‚’éš ã™
            const currentNodes = document.querySelectorAll('.node:not([style*="display: none"])');
            currentNodes.forEach(node => {
                if (node.id !== questionId) {
                    node.style.display = 'none';
                }
            });

            // æ¬¡ã®è³ªå•ã‚’è¡¨ç¤º
            const nextNode = document.getElementById(questionId);
            nextNode.style.display = 'block';
            nextNode.classList.add('active');

            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°
            currentQuestion++;
            updateProgress();

            // Google Analytics: è³ªå•é€²è¡Œè¿½è·¡
            trackEvent('question_progress', 'diagnosis', `question_${currentQuestion}`, currentQuestion);

            // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼‰
            setTimeout(() => {
                nextNode.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center',
                    inline: 'nearest'
                });
            }, 100);
        }

        function updateProgress() {
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showResult() {
            currentQuestion = totalQuestions;
            updateProgress();

            // ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ¼ãƒ‰ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.querySelector('.node.active').classList.remove('active');
            
            // å‰ã®è³ªå•ã‚’éš ã™
            document.getElementById('q7').style.display = 'none';

            // çµæœã‚’è¨ˆç®—
            const careers = calculateCareer();
            
            // Google Analytics: è¨ºæ–­å®Œäº†è¿½è·¡
            trackEvent('diagnosis_completed', 'conversion', 'career_test_complete', 1);
            
            // æœ€é©è·æ¥­ã®è¿½è·¡
            const topCareer = careers[0];
            trackEvent('result_shown', 'diagnosis', `top_career_${topCareer.category}`, topCareer.match);
            
            // çµæœã‚’è¡¨ç¤º
            const resultNode = document.getElementById('result');
            const careerResultDiv = document.getElementById('careerResult');
            
            careerResultDiv.innerHTML = careers.map((career, index) => `
                <div class="career-card" style="animation-delay: ${index * 0.2}s">
                    <span class="category">${career.category}</span>
                    <span class="icon">${career.icon}</span>
                    <h4>${career.title}</h4>
                    <p>${career.description}</p>
                    <div class="match-score">é©åˆåº¦: ${career.match}%</div>
                </div>
            `).join('');

            resultNode.style.display = 'block';
            resultNode.classList.add('active');
            
            // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                resultNode.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center',
                    inline: 'nearest'
                });
            }, 300);
        }

        function calculateCareer() {
            const { interest, personality, problem_solving, environment, values, workstyle, stress } = answers;
            
            const careerDatabase = [
                // ITãƒ»æŠ€è¡“ç³»
                {
                    title: "ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                    icon: "ğŸ’»",
                    description: "ã‚·ã‚¹ãƒ†ãƒ ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­è¨ˆãƒ»é–‹ç™ºã—ã€æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±º",
                    category: "ITãƒ»æŠ€è¡“",
                    traits: { technology: 9, introvert: 7, analytical: 9, office: 7, growth: 8, specialist: 9, moderate: 7 }
                },
                {
                    title: "ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆ",
                    icon: "ğŸ“Š",
                    description: "ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¦ä¾¡å€¤ã‚ã‚‹æ´å¯Ÿã¨ãƒ“ã‚¸ãƒã‚¹è§£æ±ºç­–ã‚’æä¾›",
                    category: "ITãƒ»æŠ€è¡“",
                    traits: { technology: 8, introvert: 8, analytical: 9, office: 8, growth: 9, specialist: 9, moderate: 8 }
                },
                {
                    title: "AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                    icon: "ğŸ¤–",
                    description: "äººå·¥çŸ¥èƒ½ã‚„æ©Ÿæ¢°å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºã¨æœ€é©åŒ–ã‚’æ‹…å½“",
                    category: "ITãƒ»æŠ€è¡“",
                    traits: { technology: 9, introvert: 7, analytical: 9, specialized: 8, growth: 9, specialist: 9, high_pressure: 7 }
                },
                {
                    title: "Webãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼",
                    icon: "ğŸŒ",
                    description: "ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨ç¾ã—ã•ã‚’å…¼å‚™ã—ãŸWebã‚µã‚¤ãƒˆã‚’ãƒ‡ã‚¶ã‚¤ãƒ³",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»IT",
                    traits: { creative: 8, technology: 7, creative: 8, remote: 8, creativity: 9, specialist: 7, moderate: 8 }
                },
                {
                    title: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                    icon: "ğŸ”—",
                    description: "ä¼æ¥­ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã®è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒ»é‹ç”¨ã‚’æ‹…å½“",
                    category: "ITãƒ»æŠ€è¡“",
                    traits: { technology: 8, introvert: 6, practical: 8, office: 7, stability: 8, specialist: 8, moderate: 7 }
                },
                
                // åŒ»ç™‚ãƒ»å¥åº·ãƒ»ç¦ç¥‰ç³»
                {
                    title: "åŒ»å¸«",
                    icon: "ğŸ‘¨â€âš•ï¸",
                    description: "æ‚£è€…ã®è¨ºå¯Ÿãƒ»æ²»ç™‚ã‚’è¡Œã„ã€äººã€…ã®å¥åº·ã¨ç”Ÿå‘½ã‚’å®ˆã‚‹",
                    category: "åŒ»ç™‚ãƒ»å¥åº·",
                    traits: { health: 9, extrovert: 7, analytical: 8, specialized: 9, impact: 9, specialist: 9, high_pressure: 9 }
                },
                {
                    title: "çœ‹è­·å¸«",
                    icon: "ğŸ‘©â€âš•ï¸",
                    description: "æ‚£è€…ã®çœ‹è­·ã¨ã‚±ã‚¢ã‚’é€šã˜ã¦å›å¾©ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "åŒ»ç™‚ãƒ»å¥åº·",
                    traits: { health: 9, extrovert: 8, collaborative: 8, specialized: 8, impact: 9, supporter: 9, high_pressure: 8 }
                },
                {
                    title: "è–¬å‰¤å¸«",
                    icon: "ğŸ’Š",
                    description: "è–¬ã®èª¿å‰¤ã¨æœè–¬æŒ‡å°ã§æ‚£è€…ã®æ²»ç™‚ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "åŒ»ç™‚ãƒ»å¥åº·",
                    traits: { health: 8, balanced: 7, analytical: 8, specialized: 8, impact: 8, specialist: 8, moderate: 7 }
                },
                {
                    title: "ç†å­¦ç™‚æ³•å£«",
                    icon: "ğŸƒâ€â™‚ï¸",
                    description: "é‹å‹•ç™‚æ³•ã§æ‚£è€…ã®èº«ä½“æ©Ÿèƒ½å›å¾©ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "åŒ»ç™‚ãƒ»å¥åº·",
                    traits: { health: 9, extrovert: 7, practical: 8, specialized: 8, impact: 9, supporter: 8, moderate: 7 }
                },
                {
                    title: "ä¿è‚²å£«",
                    icon: "ğŸ‘¶",
                    description: "å­ã©ã‚‚ãŸã¡ã®æˆé•·ã¨ç™ºé”ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å®‰å…¨ãªç’°å¢ƒã‚’æä¾›",
                    category: "æ•™è‚²ãƒ»ç¦ç¥‰",
                    traits: { people: 8, extrovert: 9, collaborative: 8, specialized: 7, impact: 9, supporter: 9, moderate: 6 }
                },
                {
                    title: "ä»‹è­·ç¦ç¥‰å£«",
                    icon: "ğŸ¤",
                    description: "é«˜é½¢è€…ã‚„éšœå®³è€…ã®æ—¥å¸¸ç”Ÿæ´»ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "åŒ»ç™‚ãƒ»ç¦ç¥‰",
                    traits: { health: 8, extrovert: 8, collaborative: 7, specialized: 7, impact: 9, supporter: 9, low_pressure: 8 }
                },
                
                // æ•™è‚²ãƒ»ç ”ç©¶ç³»
                {
                    title: "æ•™å¸«",
                    icon: "ğŸ‘©â€ğŸ«",
                    description: "çŸ¥è­˜ã¨æŠ€èƒ½ã‚’æ¬¡ä¸–ä»£ã«ä¼ãˆã€äººæ ¼å½¢æˆã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "æ•™è‚²",
                    traits: { education: 9, extrovert: 8, collaborative: 8, specialized: 8, impact: 9, supporter: 8, moderate: 7 }
                },
                {
                    title: "ç ”ç©¶å“¡",
                    icon: "ğŸ”¬",
                    description: "å°‚é–€åˆ†é‡ã®ç ”ç©¶ã‚’é€šã˜ã¦æ–°ã—ã„çŸ¥è¦‹ã‚„æŠ€è¡“ã‚’å‰µå‡º",
                    category: "ç ”ç©¶ãƒ»æŠ€è¡“",
                    traits: { education: 8, introvert: 8, analytical: 9, specialized: 9, impact: 8, specialist: 9, low_pressure: 8 }
                },
                {
                    title: "å›³æ›¸é¤¨å¸æ›¸",
                    icon: "ğŸ“š",
                    description: "å›³æ›¸é¤¨ã®é‹å–¶ã¨åˆ©ç”¨è€…ã®å­¦ç¿’ãƒ»ç ”ç©¶æ´»å‹•ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "æ•™è‚²ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
                    traits: { education: 8, introvert: 7, practical: 7, office: 8, stability: 8, supporter: 8, low_pressure: 9 }
                },
                
                // ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ç³»
                {
                    title: "ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼",
                    icon: "ğŸ¨",
                    description: "è¦–è¦šçš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã§æƒ…å ±ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åŠ¹æœçš„ã«ä¼é”",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",
                    traits: { creative: 9, introvert: 6, creative: 9, remote: 8, creativity: 9, specialist: 8, moderate: 7 }
                },
                {
                    title: "ã‚¤ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼",
                    icon: "âœï¸",
                    description: "çµµã‚„ã‚¤ãƒ©ã‚¹ãƒˆã§è¡¨ç¾ã—ã€æ§˜ã€…ãªãƒ¡ãƒ‡ã‚£ã‚¢ã§ä½œå“ã‚’æä¾›",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",
                    traits: { creative: 9, introvert: 8, creative: 9, remote: 9, creativity: 9, specialist: 8, low_pressure: 8 }
                },
                {
                    title: "æ˜ åƒã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼",
                    icon: "ğŸ¬",
                    description: "å‹•ç”»ã‚„æ˜ åƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¼ç”»ãƒ»åˆ¶ä½œãƒ»ç·¨é›†ã‚’æ‹…å½“",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",
                    traits: { creative: 9, balanced: 7, creative: 8, remote: 7, creativity: 9, specialist: 8, high_pressure: 7 }
                },
                {
                    title: "éŸ³æ¥½ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼",
                    icon: "ğŸµ",
                    description: "æ¥½æ›²åˆ¶ä½œã‚„éŸ³éŸ¿åŠ¹æœã§æ„Ÿå‹•ã‚„ä½“é¨“ã‚’å‰µé€ ",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",
                    traits: { creative: 9, introvert: 7, creative: 9, specialized: 8, creativity: 9, specialist: 9, moderate: 8 }
                },
                {
                    title: "ä½œå®¶ãƒ»ç·¨é›†è€…",
                    icon: "ğŸ“",
                    description: "æ–‡ç« ã‚„æ›¸ç±ã‚’é€šã˜ã¦æƒ…å ±ã‚„ç‰©èªã‚’ä¼ãˆã‚‹",
                    category: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",
                    traits: { creative: 8, introvert: 8, creative: 8, remote: 9, creativity: 9, specialist: 8, low_pressure: 8 }
                },
                
                // ãƒ“ã‚¸ãƒã‚¹ãƒ»å–¶æ¥­ç³»
                {
                    title: "å–¶æ¥­è·",
                    icon: "ğŸ“",
                    description: "é¡§å®¢ã¨ã®é–¢ä¿‚æ§‹ç¯‰ã«ã‚ˆã‚Šå•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®è²©å£²ã‚’æ¨é€²",
                    category: "å–¶æ¥­ãƒ»è²©å£²",
                    traits: { business: 8, extrovert: 9, collaborative: 8, fieldwork: 9, growth: 8, generalist: 8, high_pressure: 8 }
                },
                {
                    title: "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ",
                    icon: "ğŸ“¢",
                    description: "å¸‚å ´åˆ†æã¨æˆ¦ç•¥ç«‹æ¡ˆã§å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾¡å€¤ã‚’å‘ä¸Š",
                    category: "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°",
                    traits: { business: 8, balanced: 7, analytical: 7, office: 7, growth: 8, specialist: 7, moderate: 8 }
                },
                {
                    title: "ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ",
                    icon: "ğŸ’¼",
                    description: "å°‚é–€çŸ¥è­˜ã§ä¼æ¥­ã®èª²é¡Œè§£æ±ºã¨æˆé•·ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°",
                    traits: { business: 9, extrovert: 8, analytical: 8, fieldwork: 7, growth: 9, specialist: 8, high_pressure: 9 }
                },
                {
                    title: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼",
                    icon: "ğŸ“‹",
                    description: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’çµ±æ‹¬ã—ã€ç›®æ¨™é”æˆã¸å°ã",
                    category: "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ",
                    traits: { business: 7, extrovert: 8, collaborative: 9, office: 8, growth: 8, leader: 9, high_pressure: 8 }
                },
                
                // äº‹å‹™ãƒ»ç®¡ç†ç³»
                {
                    title: "ä¸€èˆ¬äº‹å‹™å“¡",
                    icon: "ğŸ“„",
                    description: "æ›¸é¡ä½œæˆã‚„ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã§çµ„ç¹”ã®é‹å–¶ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "äº‹å‹™ãƒ»ç®¡ç†",
                    traits: { business: 6, introvert: 6, practical: 8, office: 9, stability: 9, supporter: 8, low_pressure: 8 }
                },
                {
                    title: "çµŒç†ãƒ»ä¼šè¨ˆå£«",
                    icon: "ğŸ’°",
                    description: "è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨åˆ†æã§ä¼æ¥­ã®çµŒå–¶ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "è²¡å‹™ãƒ»ä¼šè¨ˆ",
                    traits: { business: 8, introvert: 7, analytical: 9, office: 9, stability: 8, specialist: 8, moderate: 7 }
                },
                {
                    title: "äººäº‹æ‹…å½“è€…",
                    icon: "ğŸ‘¥",
                    description: "æ¡ç”¨ã‹ã‚‰è‚²æˆã¾ã§äººæã«é–¢ã™ã‚‹æ¥­å‹™ã‚’æ‹…å½“",
                    category: "äººäº‹ãƒ»åŠ´å‹™",
                    traits: { people: 8, extrovert: 7, collaborative: 8, office: 8, impact: 7, generalist: 8, moderate: 7 }
                },
                {
                    title: "ç§˜æ›¸",
                    icon: "ğŸ“…",
                    description: "ç®¡ç†è·ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã¨æ¥­å‹™ã‚µãƒãƒ¼ãƒˆ",
                    category: "äº‹å‹™ãƒ»ã‚µãƒãƒ¼ãƒˆ",
                    traits: { business: 6, balanced: 7, practical: 8, office: 9, stability: 8, supporter: 9, moderate: 8 }
                },
                
                // ã‚µãƒ¼ãƒ“ã‚¹ãƒ»æ¥å®¢ç³»
                {
                    title: "ç¾å®¹å¸«",
                    icon: "ğŸ’‡â€â™€ï¸",
                    description: "ãƒ˜ã‚¢ã‚«ãƒƒãƒˆã‚„ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã§é¡§å®¢ã®ç¾ã—ã•ã‚’æ¼”å‡º",
                    category: "ç¾å®¹ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
                    traits: { people: 8, extrovert: 8, creative: 7, specialized: 8, creativity: 8, specialist: 8, moderate: 7 }
                },
                {
                    title: "èª¿ç†å¸«ãƒ»ã‚·ã‚§ãƒ•",
                    icon: "ğŸ‘¨â€ğŸ³",
                    description: "æ–™ç†ã®èª¿ç†ã¨æ–°ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹ç™ºã§é£Ÿã®å–œã³ã‚’æä¾›",
                    category: "æ–™ç†ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
                    traits: { creative: 7, balanced: 7, creative: 8, specialized: 8, creativity: 8, specialist: 8, high_pressure: 8 }
                },
                {
                    title: "è²©å£²å“¡",
                    icon: "ğŸ›ï¸",
                    description: "å•†å“çŸ¥è­˜ã¨æ¥å®¢ã‚¹ã‚­ãƒ«ã§é¡§å®¢æº€è¶³ã‚’å®Ÿç¾",
                    category: "è²©å£²ãƒ»å°å£²",
                    traits: { people: 9, extrovert: 9, collaborative: 7, fieldwork: 7, stability: 7, supporter: 7, moderate: 7 }
                },
                {
                    title: "ãƒ›ãƒ†ãƒ«ã‚¹ã‚¿ãƒƒãƒ•",
                    icon: "ğŸ¨",
                    description: "å®¿æ³Šã‚µãƒ¼ãƒ“ã‚¹ã‚’é€šã˜ã¦å¿«é©ãªæ»åœ¨ã‚’æä¾›",
                    category: "ãƒ›ã‚¹ãƒ”ã‚¿ãƒªãƒ†ã‚£",
                    traits: { people: 9, extrovert: 8, collaborative: 8, specialized: 7, impact: 7, supporter: 8, high_pressure: 7 }
                },
                {
                    title: "ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼",
                    icon: "ğŸ’’",
                    description: "çµå©šå¼ã®ä¼ç”»ãƒ»é‹å–¶ã§ç‰¹åˆ¥ãªæ—¥ã‚’æ¼”å‡º",
                    category: "ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
                    traits: { people: 8, extrovert: 8, creative: 8, fieldwork: 8, creativity: 8, generalist: 8, high_pressure: 8 }
                },
                
                // å…¬å‹™ãƒ»æ³•å¾‹ç³»
                {
                    title: "å…¬å‹™å“¡",
                    icon: "ğŸ›ï¸",
                    description: "è¡Œæ”¿ã‚µãƒ¼ãƒ“ã‚¹ã‚’é€šã˜ã¦ç¤¾ä¼šã®å®‰å®šã¨ç™ºå±•ã«è²¢çŒ®",
                    category: "å…¬å‹™",
                    traits: { business: 6, balanced: 7, practical: 8, office: 8, stability: 9, supporter: 8, low_pressure: 8 }
                },
                {
                    title: "è­¦å¯Ÿå®˜",
                    icon: "ğŸ‘®â€â™‚ï¸",
                    description: "æ²»å®‰ç¶­æŒã¨å¸‚æ°‘ã®å®‰å…¨ã‚’å®ˆã‚‹é‡è¦ãªä½¿å‘½",
                    category: "å…¬å®‰ãƒ»æ²»å®‰",
                    traits: { people: 7, extrovert: 7, practical: 8, fieldwork: 9, impact: 9, leader: 7, high_pressure: 9 }
                },
                {
                    title: "æ¶ˆé˜²å£«",
                    icon: "ğŸš’",
                    description: "ç«ç½ã‚„ç½å®³ã‹ã‚‰äººã€…ã®ç”Ÿå‘½ã¨è²¡ç”£ã‚’å®ˆã‚‹",
                    category: "å…¬å®‰ãƒ»æ•‘æ€¥",
                    traits: { people: 8, extrovert: 7, practical: 9, fieldwork: 9, impact: 9, leader: 7, high_pressure: 9 }
                },
                {
                    title: "å¼è­·å£«",
                    icon: "âš–ï¸",
                    description: "æ³•å¾‹ã®å°‚é–€çŸ¥è­˜ã§æ­£ç¾©ã¨æ¨©åˆ©ã‚’å®ˆã‚‹",
                    category: "æ³•å¾‹ãƒ»å¸æ³•",
                    traits: { business: 8, balanced: 7, analytical: 9, office: 7, impact: 8, specialist: 9, high_pressure: 9 }
                },
                
                // æŠ€èƒ½ãƒ»æŠ€è¡“ç³»
                {
                    title: "å»ºç¯‰å£«",
                    icon: "ğŸ—ï¸",
                    description: "å»ºç‰©ã®è¨­è¨ˆã¨ç›£ç†ã§å®‰å…¨ã§ç¾ã—ã„ç©ºé–“ã‚’å‰µé€ ",
                    category: "å»ºç¯‰ãƒ»è¨­è¨ˆ",
                    traits: { creative: 7, introvert: 6, analytical: 8, specialized: 8, creativity: 7, specialist: 9, moderate: 8 }
                },
                {
                    title: "é›»æ°—å·¥äº‹å£«",
                    icon: "âš¡",
                    description: "é›»æ°—è¨­å‚™ã®è¨­ç½®ã¨ä¿å®ˆã§ç¤¾ä¼šã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ”¯ãˆã‚‹",
                    category: "æŠ€èƒ½ãƒ»å·¥äº‹",
                    traits: { technology: 7, introvert: 6, practical: 9, fieldwork: 8, stability: 8, specialist: 8, moderate: 7 }
                },
                {
                    title: "å¤§å·¥",
                    icon: "ğŸ”¨",
                    description: "æœ¨æåŠ å·¥ã¨å»ºç¯‰æŠ€è¡“ã§ä½ã¾ã„ã¥ãã‚Šã«è²¢çŒ®",
                    category: "å»ºç¯‰ãƒ»æŠ€èƒ½",
                    traits: { creative: 6, introvert: 6, practical: 9, fieldwork: 9, stability: 7, specialist: 8, moderate: 7 }
                },
                {
                    title: "æ©Ÿæ¢°è¨­è¨ˆæŠ€è¡“è€…",
                    icon: "âš™ï¸",
                    description: "æ©Ÿæ¢°è£…ç½®ã®è¨­è¨ˆã¨é–‹ç™ºã§ç”£æ¥­ã®ç™ºå±•ã«è²¢çŒ®",
                    category: "æŠ€è¡“ãƒ»è¨­è¨ˆ",
                    traits: { technology: 8, introvert: 7, analytical: 9, specialized: 8, growth: 7, specialist: 9, moderate: 8 }
                },
                
                // ãã®ä»–å°‚é–€è·
                {
                    title: "æ „é¤Šå£«",
                    icon: "ğŸ¥—",
                    description: "æ „é¤Šå­¦ã®çŸ¥è­˜ã§å¥åº·çš„ãªé£Ÿç”Ÿæ´»ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "å¥åº·ãƒ»æ „é¤Š",
                    traits: { health: 8, balanced: 7, analytical: 7, specialized: 8, impact: 8, specialist: 7, moderate: 7 }
                },
                {
                    title: "ã‚¹ãƒãƒ¼ãƒ„ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼",
                    icon: "ğŸƒâ€â™€ï¸",
                    description: "é‹å‹•æŒ‡å°ã§å¥åº·å¢—é€²ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "ã‚¹ãƒãƒ¼ãƒ„ãƒ»å¥åº·",
                    traits: { health: 8, extrovert: 9, practical: 8, specialized: 8, impact: 8, supporter: 8, moderate: 8 }
                },
                {
                    title: "æ—…è¡Œä»£ç†åº—ã‚¹ã‚¿ãƒƒãƒ•",
                    icon: "âœˆï¸",
                    description: "æ—…è¡Œã®ä¼ç”»ã¨æ‰‹é…ã§ç´ æ™´ã‚‰ã—ã„ä½“é¨“ã‚’æä¾›",
                    category: "æ—…è¡Œãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
                    traits: { people: 8, extrovert: 8, collaborative: 7, office: 7, creativity: 7, generalist: 8, moderate: 7 }
                },
                {
                    title: "é‡‘èã‚¢ãƒŠãƒªã‚¹ãƒˆ",
                    icon: "ğŸ“ˆ",
                    description: "å¸‚å ´åˆ†æã¨æŠ•è³‡åˆ¤æ–­ã§è³‡ç”£é‹ç”¨ã‚’ã‚µãƒãƒ¼ãƒˆ",
                    category: "é‡‘èãƒ»æŠ•è³‡",
                    traits: { business: 9, introvert: 6, analytical: 9, office: 8, growth: 8, specialist: 8, high_pressure: 8 }
                }
            ];

            // ã‚¹ã‚³ã‚¢è¨ˆç®—
            const scoredCareers = careerDatabase.map(career => {
                let score = 0;
                let maxScore = 0;

                // å„ç‰¹æ€§ã«å¯¾ã—ã¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
                const weights = {
                    interest: 3,
                    personality: 2,
                    problem_solving: 2,
                    environment: 1.5,
                    values: 2.5,
                    workstyle: 2,
                    stress: 1
                };

                // èˆˆå‘³åˆ†é‡ã®ã‚¹ã‚³ã‚¢
                if (career.traits[interest]) {
                    score += career.traits[interest] * weights.interest;
                }
                maxScore += 9 * weights.interest;

                // æ€§æ ¼ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚³ã‚¢
                if (career.traits[personality]) {
                    score += career.traits[personality] * weights.personality;
                }
                maxScore += 9 * weights.personality;

                // å•é¡Œè§£æ±ºã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¹ã‚³ã‚¢
                if (career.traits[problem_solving]) {
                    score += career.traits[problem_solving] * weights.problem_solving;
                }
                maxScore += 9 * weights.problem_solving;

                // ä»•äº‹ç’°å¢ƒã®ã‚¹ã‚³ã‚¢
                if (career.traits[environment]) {
                    score += career.traits[environment] * weights.environment;
                }
                maxScore += 9 * weights.environment;

                // ä¾¡å€¤è¦³ã®ã‚¹ã‚³ã‚¢
                if (career.traits[values]) {
                    score += career.traits[values] * weights.values;
                }
                maxScore += 9 * weights.values;

                // åƒãæ–¹ã®ã‚¹ã‚³ã‚¢
                if (career.traits[workstyle]) {
                    score += career.traits[workstyle] * weights.workstyle;
                }
                maxScore += 9 * weights.workstyle;

                // ã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ã®ã‚¹ã‚³ã‚¢
                if (career.traits[stress]) {
                    score += career.traits[stress] * weights.stress;
                }
                maxScore += 9 * weights.stress;

                const match = Math.round((score / maxScore) * 100);
                return { ...career, match };
            });

            // ã‚¹ã‚³ã‚¢é †ã«ã‚½ãƒ¼ãƒˆã—ã¦ä¸Šä½5ã¤ã‚’è¿”ã™
            return scoredCareers
                .sort((a, b) => b.match - a.match)
                .slice(0, 5);
        }

        function resetTest() {
            answers = {};
            currentQuestion = 0;
            
            // Google Analytics: ãƒªã‚»ãƒƒãƒˆè¿½è·¡
            trackEvent('test_reset', 'engagement', 'restart_diagnosis', 1);
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('progressFill').style.width = '0%';
            
            // ã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰ã‚’éš ã™
            document.querySelectorAll('.node').forEach(node => {
                node.style.display = 'none';
                node.classList.remove('active');
            });
            
            // ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ã‚’è¡¨ç¤º
            const startNode = document.getElementById('start');
            startNode.style.display = 'block';
            startNode.classList.add('active');
            
            // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                startNode.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center',
                    inline: 'nearest'
                });
            }, 100);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æœ€åˆã¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ã®ã¿è¡¨ç¤º
            document.querySelectorAll('.node:not(#start)').forEach(node => {
                node.style.display = 'none';
            });
            
            // Google Analytics: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿è¿½è·¡
            trackEvent('page_loaded', 'engagement', 'career_test_landing', 1);
        });

        // è¨ºæ–­é–‹å§‹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ç”¨ã®é–¢æ•°è¿½åŠ 
        function startDiagnosis() {
            trackEvent('diagnosis_started', 'engagement', 'career_test_start', 1);
            nextQuestion('q1');
        }
    </script>
</body>
</html>
